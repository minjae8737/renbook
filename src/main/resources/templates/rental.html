<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>메인</title>

    <!-- 부트스트랩5 -->
    <link href="../static/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}" rel="stylesheet">

    <!-- css추가 -->
    <link href="../static/css/styles.css" th:href="@{/css/styles.css}" rel="stylesheet">

</head>
<body>

<!--<div th:replace ="header.html"></div>-->


<header>
    <!-- 로그인 가입 버튼 -->
    <div class="header-top">
        <div class="container">
            <div class="container">
                <div class="row justify-content-end">
                    <div class="col-auto" th:if="${loginMember == null}">
                        <a class="login-join-label me-3" href="login.html" th:href="@{/login}">로그인</a>
                        <a class="login-join-label" href="join.html" th:href="@{/join}">회원가입</a>
                    </div>
                    <div class="col-auto" th:if="${loginMember !=null}">
                        <a class="login-join-label" href="main.html" th:href="@{/logout}">로그아웃</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 검색바 -->
    <div class="header-middle">
        <div class="container header-middle-con">
            <div class="col-2">
                <a class="d-flex justify-content-center" href="main.html" th:href="@{/}">
                    <img class="header-logo" src="/images/renbook_logo.png">
                </a>
            </div>

            <div class="col">
                <form method="get" action="/search" class="searchbar">
                    <input id="keyword" name="keyword" type="text" class="form-control"
                           placeholder="제목, 작가, 출판사 를 검색해 보세요.">
                    <button class="btn" type="submit" th:onclick="|location.href='@{/search(keyword=${keyword})}'|">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                             class="bi bi-search"
                             viewBox="0 0 16 16">
                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
                        </svg>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- 네비게이션 탭 -->
    <div class="header-bottom">
        <div class="container">
            <ul class="nav">
                <li class="nav-item">
                    <a class="nav-link">베스트 도서</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link">신간 도서</a>
                </li>
                <li class="nav-item ms-auto">
                    <a class="nav-link" th:href="@{/rental}">대여 목록</a>
                </li>
            </ul>
        </div>
    </div>

</header>

<main class="main-con">

    <section class="pt-2 pb-2">
        <div class="container">
            <!--헤더-->
            <div class="divider-thin pt-2 pb-2">
                <div class="book-header-label">대출 목록</div>
            </div>


            <div class="divider-thin row" th:each="rentalBook : ${rentalList}">
                <!--책 이미지-->
                <div class="col-2">
                    <img class="rental-img" src="/images/renbook_cover.png">
                </div>
                <div class="col rental-info-con">
                    <h3 class="row book-detail-info-title" th:text="${rentalBook.bookTitle}">제목</h3>
                    <span class="row book-detail-info-label pt-4" th:text="${rentalBook.author}">글쓴이</span>
                    <span class="row book-detail-info-label pt-2"
                          th:text="${#temporals.format(rentalBook.rentalDate,'yyyy-MM-dd')} + ' ~ ' + ${#temporals.format(rentalBook.returnDate,'yyyy-MM-dd')}">대여 기간</span>
                    <span class="row book-detail-info-title" th:text="${rentalBook.isRental.equals('N') ? '반납완료' : '대여중' }"></span>
                </div>
                <div class="d-grid align-self-center col-2 gap-4">
                    <form th:action="@{/return}" method="post">
                        <input type="hidden" th:name="rentalNo" th:value="${rentalBook.rentalNo}">
                        <button class="btn btn-success w-100" th:classappend="${rentalBook.isRental.equals('N') ? 'disabled' : '' }" type="submit">반납하기</button >
                    </form>
                    <form method="post">
                        <input type="hidden" th:name="rentalNo" th:value="${rentalBook.rentalNo}">
                        <button class="btn btn-success w-100" th:classappend="${rentalBook.isRental.equals('N') || rentalBook.extensionCount > 0 ? 'disabled' : '' }">연장하기</button>
                    </form>
                </div>
            </div>


        </div>
    </section>

</main>

<footer>
    <div class="footer-con">
        <div class="container">
            <div class="">
                <img class="row footer-logo" src="/images/renbook_logo.png">
                <span class="row pt-3">이메일 : minjae8737@gmail.com</span>
            </div>
        </div>
    </div>
</footer>

</body>
</html>